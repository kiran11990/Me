<div>
    <h2>Application Update Form</h2>
    <form [formGroup]="applicationForm" (ngSubmit)="initSubmit(applicationForm.value)">

        <div class="row">
            <div class="col-xs-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['supplier'].valid && applicationForm.controls['supplier'].touched}">
                    <label class="required">Supplier<span class="alert-danger">*</span></label>
                    <select class="form-control" [formControl]="applicationForm.controls['supplier']" [(ngModel)]="applicationData.supplierId" style="width:50%" (ngModelChange)="onChange($event)" >
                        <option *ngIf="title=='New Application' &&supplierFlag" value="select">Select Suppliers</option>
                        <option *ngFor="let item of applicationMetaData.suppliers"
                                [ngValue]="item.supplierId" [selected]="applicationData.supplierId == item.supplierId">
                            {{item.supplierName}}
                        </option>
                    </select>
                    <div *ngIf="applicationForm.controls['supplier'].hasError('required') && applicationForm.controls['supplier'].touched" class="alert alert-danger">Please Select a Supplier.</div>
                </div>
            </div>
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['contactId'].valid && applicationForm.controls['contactId'].touched}"  >
                    <label>Contract ID <span class="alert-danger">*</span></label>
                    <select class="form-control" [formControl]="applicationForm.controls['contactId']" [(ngModel)]="applicationData.contractId" style="width:50%">
                        <option *ngIf="title=='New Application' &&contractIdFlag" value="select">Select Contract</option>
                        <option *ngFor="let item of applicationMetaData.contractIds"
                                [ngValue]="item" [selected]="applicationData.contractId ==item">
                            {{item}}
                        </option>
                    </select>
                    <div *ngIf="applicationForm.controls['contactId'].hasError('required') && applicationForm.controls['contactId'].touched" class="alert alert-danger">Please Select Contract ID.</div>
                </div>
            </div>

        </div>
        <div class="row">
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['serviceline'].valid && applicationForm.controls['serviceline'].touched}"  >
                    <label>Service Line<span class="alert-danger">*</span></label>
                    <input class="form-control" type="text" [formControl]="applicationForm.controls['serviceline']" [(ngModel)]="applicationData.serviceLine"style="width:50%" />
                    <div *ngIf="applicationForm.controls['serviceline'].hasError('required') && applicationForm.controls['serviceline'].touched" class="alert alert-danger">Please Enter Service LIne.</div>
                </div>
            </div>
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['Application'].valid && applicationForm.controls['Application'].touched}">
                    <label>Application<span class="alert-danger">*</span></label>
                    <input class="form-control" type="text" [formControl]="applicationForm.controls['Application']" [(ngModel)]="applicationData.application"  style="width:50%" />
                    <div *ngIf="applicationForm.controls['Application'].hasError('required') && applicationForm.controls['Application'].touched" class="alert alert-danger">Please Enter Application.</div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['OwnerAlias'].valid && applicationForm.controls['OwnerAlias'].touched}">
                    <label>Owner Alias<span class="alert-danger">*</span></label>
                    <input class="form-control" type="text" [formControl]="applicationForm.controls['OwnerAlias']" [(ngModel)]="applicationData.ownerAlias" style="width:50%" />
                    <div *ngIf="applicationForm.controls['OwnerAlias'].hasError('required') && applicationForm.controls['OwnerAlias'].touched" class="alert alert-danger">Please Enter Owner Alias.</div>
                </div>
            </div>
            <div class="col-lg-6 small">
                <div class="form-group">

                    <label>Service Class (Optional)</label>
                    <select class="form-control" [formControl]="applicationForm.controls['Serviceclass']" [(ngModel)]="applicationData.serviceClass" style="width:50%" (ngModelChange)="onServiceclassChange($event)" >
                        <option *ngIf="title=='New Application'&&serviceClassFlag" value="select">Select ServiceClass</option>
                        <option *ngFor="let item of applicationMetaData.serviceClass"
                                [value]="item.id" [selected]="applicationData.serviceClass ==item.id">
                            {{item.serviceClassName}}
                        </option>
                    </select>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['Runvsgrow'].valid && applicationForm.controls['Runvsgrow'].touched}">
                    <label>Run vs Grow<span class="alert-danger">*</span></label>
                    <select class="form-control" [formControl]="applicationForm.controls['Runvsgrow']" [(ngModel)]="applicationData.runOrGrow" style="width:50%" (ngModelChange)="onrunOrGrowChange($event)" >
                        <option *ngIf="title=='New Application' &&runOrGrowFlag " value="select">Select RunvsGrow</option>
                        <option *ngFor="let item of runOrGrow"
                                [value]="item.id" [selected]="applicationData.runOrGrow ==item.id">
                            {{item.name}}
                        </option>
                      
                    </select>
                    <div *ngIf="applicationForm.controls['Runvsgrow'].hasError('required') && applicationForm.controls['Runvsgrow'].touched" class="alert alert-danger">Please Select Run VS Grow.</div>
                </div>
            </div>
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['ApplicationGroup'].valid && applicationForm.controls['ApplicationGroup'].touched}">
                    <label>Application Group<span class="alert-danger">*</span></label>

                    <input type="text" class="form-control" [formControl]="applicationForm.controls['ApplicationGroup']" [(ngModel)]="applicationData.applicationGroup" style="width:50%"/>
                    <div *ngIf="applicationForm.controls['ApplicationGroup'].hasError('required') && applicationForm.controls['ApplicationGroup'].touched" class="alert alert-danger">Please Enter Group.</div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 small">
                <div [ngClass]="{'has-error':!applicationForm.controls['startDate'].valid && applicationForm.controls['startDate'].touched}">
                    <label>Start Date</label>
                    <my-date-picker [options]="myDatePickerOptions" class="form-control CalenderPadding" [formControl]="applicationForm.controls['startDate']" [(ngModel)]="startDate"
                                    (dateChanged)="onstartDateChanged($event)" style="width:50%"></my-date-picker>
                    <div *ngIf="applicationForm.controls['Runvsgrow'].hasError('required') && applicationForm.controls['startDate'].touched" class="alert alert-danger">Please Enter Start Date.</div>
                </div>
            </div>
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['endDate'].valid && applicationForm.controls['endDate'].touched}">
                    <label>End Date</label>
                    <my-date-picker class="form-control CalenderPadding"  [options]="myDatePickerOptions" [formControl]="applicationForm.controls['endDate']" [(ngModel)]="enddate"
                                    (dateChanged)="onendDateChanged($event)" style="width:50%"></my-date-picker>
                    <div *ngIf="applicationForm.controls['endDate'].hasError('required') && applicationForm.controls['endDate'].touched" class="alert alert-danger">Please Enter End Date.</div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-xs-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['endtoend'].valid && applicationForm.controls['endtoend'].touched}">
                    <label>End to End (Y/N)<span class="alert-danger">*</span></label>

                   
                    <div>
                        <label class="radio-inline">
                            <input type="radio" name="endtoend" value="true"  [checked]="applicationData.endToEnd ===true" [formControl]="applicationForm.controls['endtoend']" [(ngModel)]="applicationData.endToEnd">
                            Yes
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="endtoend" value="false"  [checked]="applicationData.endToEnd ===false"  [formControl]="applicationForm.controls['endtoend']" [(ngModel)]="applicationData.endToEnd">
                            No
                        </label>
                    </div>
                    <div *ngIf="applicationForm.controls['endtoend'].hasError('required') && applicationForm.controls['endtoend'].touched" class="alert alert-danger">Please Select EndtoEnd.</div>
                </div>
            </div>

            <div class="col-xs-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['epm'].valid && applicationForm.controls['epm'].touched}">
                    <label>EPM (Y/N)<span class="alert-danger">*</span></label>
                    <div>
                        <label class="radio-inline">
                            <input type="radio" name="epm" value=true  [checked]="applicationData.epm ===true" [formControl]="applicationForm.controls['epm']" [(ngModel)]="applicationData.epm">
                            Yes
                        </label>
                        <label class="radio-inline">
                            <input type="radio" name="epm" value=false [checked]="applicationData.epm ===false"  [formControl]="applicationForm.controls['epm']" [(ngModel)]="applicationData.epm">
                            NO
                        </label>
                    </div>
                    <div *ngIf="applicationForm.controls['epm'].hasError('required') && applicationForm.controls['epm'].touched" class="alert alert-danger">Please Select EndtoEnd.</div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['tm'].valid && applicationForm.controls['tm'].touched}">
                    <label>T&M</label>
                    <input class="form-control" type="text" [formControl]="applicationForm.controls['tm']" [(ngModel)]="applicationData.tm"  style="width:50%"/>
                    <div *ngIf="applicationForm.controls['tm'].hasError('pattern') && applicationForm.controls['tm'].touched" class="alert alert-danger">Please enter in percentage.</div>
                </div>
            </div>
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['ManagedCapacity'].valid && applicationForm.controls['ManagedCapacity'].touched}">
                    <label>Managed Capacity</label>
                    <input class="form-control" type="text" [formControl]="applicationForm.controls['ManagedCapacity']" [(ngModel)]="applicationData.managedCapacity" style="width:50%"/>
                    <div *ngIf="applicationForm.controls['ManagedCapacity'].hasError('pattern') && applicationForm.controls['ManagedCapacity'].touched" class="alert alert-danger">Please enter in percentage.</div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['ManagedServices'].valid && applicationForm.controls['ManagedServices'].touched}">
                    <label>Managed Services</label>
                    <input class="form-control" type="text" [formControl]="applicationForm.controls['ManagedServices']" [(ngModel)]="applicationData.managedService" style="width:50%" />
                    <div *ngIf="applicationForm.controls['ManagedServices'].hasError('pattern') && applicationForm.controls['ManagedServices'].touched" class="alert alert-danger">Please enter in percentage.</div>
                </div>
            </div>
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['Software'].valid && applicationForm.controls['Software'].touched}">
                    <label>Software Asset Search Lable ID</label>
                    <input class="form-control" type="text" [formControl]="applicationForm.controls['Software']" [(ngModel)]="applicationData.softwareAssetSearchableId"  style="width:50%"/>
                    <div *ngIf="applicationForm.controls['Software'].hasError('pattern') && applicationForm.controls['Software'].touched" class="alert alert-danger">Please enter Text or numbers only. No unsafe characters.</div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-6 small">
                <div class="form-group" [ngClass]="{'has-error':!applicationForm.controls['remarks'].valid && applicationForm.controls['remarks'].touched}">
                    <label>Remarks</label>
                    <textarea class="form-control" type="text" [formControl]="applicationForm.controls['remarks']" [(ngModel)]="applicationData.remarks" style="width:50%"></textarea>
                    <div *ngIf="applicationForm.controls['remarks'].hasError('pattern') && applicationForm.controls['remarks'].touched" class="alert alert-danger">Please enter Text or numbers only. No unsafe characters.</div>
                </div>
            </div>
            <div class="col-lg-6 small">
                <div class="form-group">
                    <label>IT-ORG</label>
                    <select class="form-control" [formControl]="applicationForm.controls['itOrg']" [(ngModel)]="applicationData.itorg" style="width:50%" (ngModelChange)="onitOrgChange($event)" >
                        <option *ngIf="title=='New Application'&&itorgFlag" value="select">Select Itorg</option>
                        <option *ngFor="let item of applicationMetaData.itOrg"
                                [value]="item.itorgId" [selected]="applicationData.itorg ==item.itorgId">
                            {{item.itorgName}}
                        </option>
                    </select>
                </div>
            </div>
        </div>
      
        <div class="form-group">
            <div class="col-lg-6 text-right">
                <button type="submit" class="btn btn-primary" [disabled]="!applicationForm.valid">Submit</button>
            </div>
            <div class="col-lg-6 text-left">
                <button type="button" class="btn btn-primary" (click)="redirect()">Back</button>
            </div>
        </div>

    </form>
</div>